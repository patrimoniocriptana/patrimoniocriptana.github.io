} else {
banner="img/fondo-azul.png"
}
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = photos[1]
} else {
banner="img/fondo-azul.png"
}
banner
for (i in 1:2) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/fondo-azul.png"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 1:2) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 1:2) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 1:2) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 1:2) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 1:2) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 1:2) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 1:2) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 1:2) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 1:2) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 1:2) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
render.all.records <- function(data){
# Generar el índice
file.name = "lugares/index.md"
file.create(file.name)
yamlheader <- "---
layout: page
title: Índice de lugares
header-img: /img/sierra-de-los-molinos-1.jpg
---\n\n"
write(yamlheader, file=file.name, append=T)
write('## Índice por categorías\n
<i class="fa fa-tag"></i> &nbsp;<a href="{{ site.github.url }}/lugares/categorias/index.html#ambiental">Ambiental</a> &nbsp;&nbsp;&nbsp;
<i class="fa fa-tag"></i> &nbsp;<a href="{{ site.github.url }}/lugares/categorias/index.html#artístico">Artístico</a> &nbsp;&nbsp;&nbsp;
<i class="fa fa-tag"></i> &nbsp;<a href="{{ site.github.url }}/lugares/categorias/index.html#etnográfico">Etnográfico</a> &nbsp;&nbsp;&nbsp;
<i class="fa fa-tag"></i> &nbsp;<a href="{{ site.github.url }}/lugares/categorias/index.html#histórico">Histórico</a> &nbsp;&nbsp;&nbsp;
## Índice alfabético\n', file=file.name, append=T)
write(unlist(lapply(data[,2], function(x) paste("- [", x, "](", gsub(" ", "-", tolower(iconv(x, to='ASCII//TRANSLIT'))), "/index.html)", sep=""))), file=file.name, append=T)
# Generar estadísticas
write("\n## Estadísticas de lugares\n", file = file.name, append = T)
write(paste("Número de lugares catalogados: <b>", nrow(data), "</b>\n", sep=""), file = file.name, append = T)
write('<img src="estadisticas.png" alt="Estadística de lugares catalogados">', file= file.name, append = T)
table <- table(data$Tipo.de.valor)
labels <- paste(names(table), "\n", table, sep="")
png("lugares/estadisticas.png")
pie(table, labels = labels, main="Lugares catalogados por categorías", col=c("#00FF00FF", "#FFFF00FF", "#FF0000FF", "#0000FFFF"))
dev.off()
}
render.all.records(data)
data$Título
knit("lugares/index.Rmd", output = paste0("lugares/index.md"))
knit("lugares/index.Rmd", output = paste0("lugares/index.md"))
table <- table(data$Tipo.de.valor)
labels <- paste(names(table), "\n", table, sep="")
pie(table, labels = labels, main="Lugares catalogados por categorías", col=c("#00FF00FF", "#FFFF00FF", "#FF0000FF", "#0000FFFF"))
knit("lugares/index.Rmd", output = paste0("lugares/index.md"))
knit("lugares/index.Rmd", output = paste0("lugares/index.md"))
lapply(data$Título, function(x) paste0("- [", x, "](", gsub(" ", "-", tolower(iconv(x, to='ASCII//TRANSLIT'))), "/index.html)\n"))
unlist(lapply(data$Título, function(x) paste0("- [", x, "](", gsub(" ", "-", tolower(iconv(x, to='ASCII//TRANSLIT'))), "/index.html)\n")))
unlist(unlist(lapply(data$Título, function(x) paste0("- [", x, "](", gsub(" ", "-", tolower(iconv(x, to='ASCII//TRANSLIT'))), "/index.html)\n"))))
knit("lugares/index.Rmd", output = paste0("lugares/index.md"))
knit("lugares/index.Rmd", output = paste0("lugares/index.md"))
knit("lugares/index.Rmd", output = paste0("lugares/index.md"))
knit("lugares/index.Rmd", output = paste0("lugares/index.md"))
setwd("./lugares")
knit("index.Rmd", output = paste0("index.md"))
url.data <- "https://docs.google.com/spreadsheets/d/1hWyDiPwVU1oUflqVSC6iSveP-NigMpZhh9e7RKXZpJk/pub?output=csv"
library(RCurl)
library(rmarkdown)
library(yaml)
library(dplyr)
data <- read.csv(text = getURL(url.data, .encoding = "UTF-8"), encoding = "UTF-8", header = T, stringsAsFactors = F)
data <- data %>% arrange(Título)
headers <- gsub(".", " ", names(data), fixed=T)
for (i in 1:nrow(data)) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
library(knitr)
data <- read.csv(text = getURL(url.data, .encoding = "UTF-8"), encoding = "UTF-8", header = T, stringsAsFactors = F)
data <- data %>% arrange(Título)
headers <- gsub(".", " ", names(data), fixed=T)
for (i in 1:nrow(data)) {
i=1
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 1:nrow(data)) {
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
url.data <- "https://docs.google.com/spreadsheets/d/1hWyDiPwVU1oUflqVSC6iSveP-NigMpZhh9e7RKXZpJk/pub?output=csv"
library(RCurl)
library(rmarkdown)
library(yaml)
library(dplyr)
library(knitr)
data <- read.csv(text = getURL(url.data, .encoding = "UTF-8"), encoding = "UTF-8", header = T, stringsAsFactors = F)
data <- data %>% arrange(Título)
headers <- gsub(".", " ", names(data), fixed=T)
View(data)
url.data <- "https://docs.google.com/spreadsheets/d/1hWyDiPwVU1oUflqVSC6iSveP-NigMpZhh9e7RKXZpJk/pub?output=csv"
library(RCurl)
library(rmarkdown)
library(yaml)
library(dplyr)
library(knitr)
data <- read.csv(text = getURL(url.data, .encoding = "UTF-8"), encoding = "UTF-8", header = T, stringsAsFactors = F)
data <- data %>% arrange(Título)
headers <- gsub(".", " ", names(data), fixed=T)
url.data <- "https://docs.google.com/spreadsheets/d/1hWyDiPwVU1oUflqVSC6iSveP-NigMpZhh9e7RKXZpJk/pub?output=csv"
library(RCurl)
library(rmarkdown)
library(yaml)
library(dplyr)
library(knitr)
data <- read.csv(text = getURL(url.data, .encoding = "UTF-8"), encoding = "UTF-8", header = T, stringsAsFactors = F)
data <- data %>% arrange(Título)
headers <- gsub(".", " ", names(data), fixed=T)
i=147
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
url.data <- "https://docs.google.com/spreadsheets/d/1hWyDiPwVU1oUflqVSC6iSveP-NigMpZhh9e7RKXZpJk/pub?output=csv"
library(RCurl)
library(rmarkdown)
library(yaml)
library(dplyr)
library(knitr)
data <- read.csv(text = getURL(url.data, .encoding = "UTF-8"), encoding = "UTF-8", header = T, stringsAsFactors = F)
data <- data %>% arrange(Título)
headers <- gsub(".", " ", names(data), fixed=T)
for (i in 147:148) {
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 147:148) {
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
for (i in 168:168) {
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
setwd("./lugares")
knit("index.Rmd", output = paste0("index.md"))
url.data <- "https://docs.google.com/spreadsheets/d/1hWyDiPwVU1oUflqVSC6iSveP-NigMpZhh9e7RKXZpJk/pub?output=csv"
library(RCurl)
library(rmarkdown)
library(yaml)
library(dplyr)
library(knitr)
data <- read.csv(text = getURL(url.data, .encoding = "UTF-8"), encoding = "UTF-8", header = T, stringsAsFactors = F)
data <- data %>% arrange(Título)
headers <- gsub(".", " ", names(data), fixed=T)
for (i in 1:nrow(data)) {
record <- data[i,]
file.name <- gsub(" ", "-", tolower(iconv(record$Título, to='ASCII//TRANSLIT')))
file.name <- gsub("/", "-", file.name)
# Descargar fotos
url.photos <- trimws(unlist(strsplit(
gsub("/view\\?usp=sharing", "",
gsub("https://drive.google.com/file/d/", "https://drive.google.com/uc?export=download&id=", record$Fotos)), ",")))
photos <- NULL
if (length(url.photos)>0) {
for (i in 1:length(url.photos)) {
photos[i] <- paste("img/", file.name, "-", i, ".jpg", sep="")
download.file(url.photos[i], photos[i], method="wget", mode="w")
}
banner = paste0("/", photos[1])
} else {
banner="/img/home-bg.jpg"
}
knit("record.Rmd", output = paste0("lugares/",file.name,".md"))
}
setwd("./lugares")
knit("index.Rmd", output = paste0("index.md"))
